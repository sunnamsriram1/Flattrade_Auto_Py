# üìà Flattrade Auto Strangle Bot
## (‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å ‡∞µ‡∞ø‡∞µ‡∞∞‡∞£ ‚Äì README.md)

---

## ‚ö†Ô∏è ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø ‡∞ó‡∞Æ‡∞®‡∞ø‡∞ï (Disclaimer)
‡∞à ‡∞™‡±ç‡∞∞‡∞æ‡∞ú‡±Ü‡∞ï‡±ç‡∞ü‡±ç **‡∞µ‡∞ø‡∞¶‡±ç‡∞Ø‡∞æ ‡∞™‡±ç‡∞∞‡∞Ø‡±ã‡∞ú‡∞®‡∞æ‡∞≤ ‡∞ï‡±ã‡∞∏‡∞Ç ‡∞Æ‡∞æ‡∞§‡±ç‡∞∞‡∞Æ‡±á**.

üëâ Live trading ‡∞≤‡±ã ‡∞µ‡∞æ‡∞°‡∞ø‡∞§‡±á **‡∞°‡∞¨‡±ç‡∞¨‡±Å ‡∞®‡∞∑‡±ç‡∞ü‡∞Ç ‡∞ú‡∞∞‡∞ø‡∞ó‡±á ‡∞Ö‡∞µ‡∞ï‡∞æ‡∞∂‡∞Ç ‡∞â‡∞Ç‡∞¶‡∞ø**.  
üëâ ‡∞Æ‡±Ä ‡∞¨‡∞æ‡∞ß‡±ç‡∞Ø‡∞§ ‡∞Æ‡±Ä‡∞¶‡±á Live mode ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞Ç‡∞ö‡∞æ‡∞≤‡∞ø.  
üëâ ‡∞Æ‡±ä‡∞¶‡∞ü PAPER MODE ‡∞≤‡±ã ‡∞™‡±Ç‡∞∞‡±ç‡∞§‡∞ø‡∞ó‡∞æ test ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø.

---

## üìå ‡∞à ‡∞™‡±ç‡∞∞‡∞æ‡∞ú‡±Ü‡∞ï‡±ç‡∞ü‡±ç ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?

‡∞á‡∞¶‡∞ø ‡∞í‡∞ï **BANKNIFTY Auto Strangle Trading Bot**.

‡∞à ‡∞¨‡∞æ‡∞ü‡±ç:
- Flattrade (PiConnect / Noren API) ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- ATM CE & PE options ‡∞®‡∞ø ‡∞Ü‡∞ü‡±ã‡∞Æ‡±á‡∞ü‡∞ø‡∞ï‡±ç‚Äå‡∞ó‡∞æ SELL ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Target ‡∞≤‡±á‡∞¶‡∞æ Stoploss ‡∞µ‡∞ö‡±ç‡∞ö‡∞ø‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞Ü‡∞ü‡±ã‡∞Æ‡±á‡∞ü‡∞ø‡∞ï‡±ç‚Äå‡∞ó‡∞æ EXIT ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Paper Trading & Live Trading ‡∞∞‡±Ü‡∞Ç‡∞°‡∞ø‡∞Ç‡∞ü‡∞ø‡∞®‡±Ä support ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

---

## üß† Strangle Strategy ‡∞Ö‡∞Ç‡∞ü‡±á ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?

- ‡∞í‡∞ï‡±á strike ‡∞µ‡∞¶‡±ç‡∞¶:
  - 1 ATM CALL (CE) SELL
  - 1 ATM PUT (PE) SELL

üëâ Market sideways ‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡±á ‡∞≤‡∞æ‡∞≠‡∞Ç ‡∞µ‡∞ö‡±ç‡∞ö‡±á strategy.

---

## üß∞ ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Æ‡±à‡∞®‡∞µ‡∞ø (Requirements)

### üîπ Software
- Python 3.9 ‡∞≤‡±á‡∞¶‡∞æ ‡∞Ö‡∞Ç‡∞§‡∞ï‡∞Ç‡∞ü‡±á ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ
- Flattrade Trading Account
- PiConnect API Access

### üîπ Python Packages
```bash
pip install requests pyotp pytz
```

---

## ‚öôÔ∏è Configuration (‡∞Ö‡∞§‡±ç‡∞Ø‡∞Ç‡∞§ ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞Æ‡±à‡∞® ‡∞≠‡∞æ‡∞ó‡∞Ç)

‡∞à values ‡∞Æ‡±Ä ‡∞ñ‡∞æ‡∞§‡∞æ ‡∞™‡±ç‡∞∞‡∞ï‡∞æ‡∞∞‡∞Ç ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡∞æ‡∞≤‡∞ø:

```python
USER_ID = "YOUR_USER_ID"
PASSWORD = "YOUR_PASSWORD"
API_KEY = "YOUR_API_KEY"
API_SECRET = "YOUR_API_SECRET"
TOTP_SECRET = "YOUR_TOTP_SECRET"
```

‚ö†Ô∏è **GitHub ‡∞≤‡±ã upload ‡∞ö‡±á‡∞∏‡±á ‡∞Æ‡±Å‡∞Ç‡∞¶‡±Å ‡∞§‡∞™‡±ç‡∞™‡∞®‡∞ø‡∞∏‡∞∞‡∞ø‡∞ó‡∞æ hide ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø**

---

## üìä Trading Settings

```python
SYMBOL = "BANKNIFTY"
STRIKE_STEP = 100
QTY = 15

PAPER = True        # True = Paper | False = Live
ENTRY_TIME = 09:20

TARGET_POINTS = 100
STOPLOSS_POINTS = 70
```

---

## üîê Token System (Login Process)

### üîπ load_token()
- Token file (`flattrade_token.json`) ‡∞â‡∞Ç‡∞¶‡∞æ check ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- ‡∞Ö‡∞¶‡±á ‡∞∞‡±ã‡∞ú‡±Å token ‡∞Ö‡∞Ø‡∞ø‡∞§‡±á reuse ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- ‡∞≤‡±á‡∞ï‡∞™‡±ã‡∞§‡±á ‡∞ï‡±ä‡∞§‡±ç‡∞§ token generate ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

---

### üîπ generate_token()
‡∞à function ‡∞≤‡±ã ‡∞ú‡∞∞‡∞ø‡∞ó‡±á‡∞¶‡∞ø:

1. India Time & Day print ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
2. Flattrade Login URL ‡∞ö‡±Ç‡∞™‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
3. Browser ‡∞≤‡±ã login ‡∞Ö‡∞µ‡±ç‡∞µ‡∞æ‡∞≤‡∞ø
4. `request_code` paste ‡∞ö‡±á‡∞Ø‡∞æ‡∞≤‡∞ø
5. SHA256 hash create ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
6. API token generate ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
7. Token file ‡∞≤‡±ã save ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

### üìÅ Token File Format
```json
{
  "token": "xxxxxxxx",
  "date": "2025-12-24",
  "time_ist": "06:05:23 PM",
  "day": "Tuesday"
}
```

---

## üîå API Connection

### üîπ connect()
- Token load ‡∞≤‡±á‡∞¶‡∞æ generate ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Flattrade server ‡∞ï‡∞ø connect ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Successful ‡∞Ö‡∞Ø‡∞ø‡∞§‡±á message print ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

```text
‚úÖ Connected to FlatTrade_Server
```

---

## üïí Market Related Functions

### üîπ market_open()
- Market open ‡∞â‡∞Ç‡∞¶‡∞æ check ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Time: 9:15 AM ‚Äì 3:30 PM

---

### üîπ get_nearest_expiry()
- BANKNIFTY ‡∞ï‡∞ø nearest weekly expiry ‡∞§‡±Ä‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

---

### üîπ fut_ltp()
- BANKNIFTY Futures current price ‡∞§‡±Ä‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

---

### üîπ atm_strike()
- Futures price ‡∞Ü‡∞ß‡∞æ‡∞∞‡∞Ç‡∞ó‡∞æ ATM strike calculate ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

---

## üìà Option Functions

### üîπ option_symbols(atm)
- ATM CE & PE symbols generate ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

### üîπ get_ltp(symbol)
- Option current LTP ‡∞§‡±Ä‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

---

## üìù Order Placement

### üîπ place(symbol, side)

| Mode | Action |
|----|----|
| PAPER | Print ‡∞Æ‡∞æ‡∞§‡±ç‡∞∞‡∞Æ‡±á |
| LIVE | Real order place |

SELL = `"S"`  
BUY = `"B"`

---

## üìä Trading Logic

### üîπ enter_trade()
- Entry time ‡∞µ‡∞ö‡±ç‡∞ö‡∞ø‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å run ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- ATM CE & PE SELL ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Entry prices save ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

---

### üîπ monitor_trade()
- ‡∞™‡±ç‡∞∞‡∞§‡∞ø few seconds ‡∞ï‡∞ø PnL calculate ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

**PnL Formula:**
```
(Entry CE - Current CE) + (Entry PE - Current PE)
```

---

### üîπ exit_trade()
- Target ‡∞≤‡±á‡∞¶‡∞æ SL hit ‡∞Ö‡∞Ø‡∞ø‡∞§‡±á
- Both legs BUY back ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- CSV ‡∞≤‡±ã trade save ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Program exit ‡∞Ö‡∞µ‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

---

## üìÅ CSV Logging

File: `strangle_trades.csv`

```csv
TIME, CE, PE, PNL
```

---

## üîÅ Main Loop

- Market open wait ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Entry time ‡∞µ‡∞ö‡±ç‡∞ö‡∞ø‡∞®‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å trade enter
- Exit ‡∞Ö‡∞Ø‡±ç‡∞Ø‡±á ‡∞µ‡∞∞‡∞ï‡±Å monitor ‡∞ö‡±á‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø

Terminal output example:
```
‚è≥ 10:15:30
üìä PnL: 420
```

---

## üß™ PAPER vs üî• LIVE MODE

| Feature | PAPER | LIVE |
|------|------|------|
| Money Risk | ‚ùå | ‚úÖ |
| Orders | Fake | Real |
| Beginners | Best | Risky |

---

## üì≤ Telegram Alerts (Optional)

```python
TG_ENABLE = True
TG_BOT_TOKEN = "YOUR_BOT_TOKEN"
TG_CHAT_ID = "YOUR_CHAT_ID"
```

---

## ‚ñ∂Ô∏è Run ‡∞ö‡±á‡∞Ø‡∞°‡∞Ç ‡∞é‡∞≤‡∞æ?

```bash
python SAFE_LIVE_STRANGLE_4v.py
```

---

## üöÄ Future Improvements
- WebSocket live prices
- Trailing Stoploss
- Multi-lot trading
- Strategy customization
- Dashboard UI

---

## üë®‚Äçüíª Author
**Sunnam Sriram**  
GitHub: https://github.com/sunnamsriram1

---

## ‚≠ê ‡∞Æ‡±Å‡∞ó‡∞ø‡∞Ç‡∞™‡±Å

‡∞à ‡∞™‡±ç‡∞∞‡∞æ‡∞ú‡±Ü‡∞ï‡±ç‡∞ü‡±ç:
- Algo Trading basics ‡∞®‡±á‡∞∞‡±ç‡∞™‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- Real API usage ‡∞ö‡±Ç‡∞™‡∞ø‡∞∏‡±ç‡∞§‡±Å‡∞Ç‡∞¶‡∞ø
- GitHub portfolio ‡∞ï‡∞ø ‡∞ö‡∞æ‡∞≤‡∞æ ‡∞Æ‡∞Ç‡∞ö‡∞ø‡∞¶‡∞ø

üëâ ‡∞Æ‡±Ä‡∞ï‡±Å ‡∞â‡∞™‡∞Ø‡±ã‡∞ó‡∞™‡∞°‡∞ø‡∞§‡±á ‚≠ê Star ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø

